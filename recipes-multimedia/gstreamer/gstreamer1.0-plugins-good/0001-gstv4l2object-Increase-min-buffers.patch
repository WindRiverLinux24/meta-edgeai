From 9c5e0ee19be372c0477a509889d76ceaf97bdc87 Mon Sep 17 00:00:00 2001
From: Rahul T R <r-ravikumar@ti.com>
Date: Tue, 10 Oct 2023 14:42:13 +0530
Subject: [PATCH] gstv4l2object: Increase min buffers for CSI capture

This will improve the latency and tolerance
of CSI pipeline

Signed-off-by: Rahul T R <r-ravikumar@ti.com>
---
 sys/v4l2/gstv4l2object.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/sys/v4l2/gstv4l2object.c b/sys/v4l2/gstv4l2object.c
index 4ce9fac..9f5a85b 100644
--- a/sys/v4l2/gstv4l2object.c
+++ b/sys/v4l2/gstv4l2object.c
@@ -5172,6 +5172,8 @@ gst_v4l2_object_decide_allocation (GstV4l2Object * obj, GstQuery * query)
      * pool, we'll need what the driver one, and one more, so we can dequeu */
     if (0 == strcmp(obj->vcap.driver, "wave5-dec")) {
         own_min = obj->min_buffers + 3;
+    } else if (0 == strcmp(obj->vcap.driver, "j721e-csi2rx")) {
+        own_min = obj->min_buffers + 4;
     } else {
         own_min = obj->min_buffers + 1;
     }
-- 
2.34.1

